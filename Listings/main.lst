


ARM Macro Assembler    Page 1 


    1 00000000         ; Se asignan etiquetas para las constantes de 0 y 1 que 
                       se usaran para mostrar el valor de los outputs que irán 
                       a las alarmas
    2 00000000         
    3 00000000 00000001 
                       TRUE    EQU              1
    4 00000000 00000000 
                       FALSE   EQU              0
    5 00000000         
    6 00000000         ; Se renombran los registros que se van a utilizar como 
                       variables
    7 00000000        0 
                       CT      RN               R0          ; CT: Cámara Térmic
                                                            a 
    8 00000000        1 
                       CD      RN               R1          ; CD: Cámara de Dis
                                                            tancia 
    9 00000000        2 
                       AS      RN               R2          ; AS: Alarmas prove
                                                            nientes del Server
   10 00000000        3 
                       MS      RN               R3          ; MS: Mensaje del S
                                                            erver que se imprim
                                                            irá en el LCD
   11 00000000         
   12 00000000         
   13 00000000         ; Se asignan etiquetas para los espacios de memoria RAM 
                       donde se almacenarán los ouputs del sistema
   14 00000000         ; La memoria RAM comienza en la dirección 0x20000000
   15 00000000         ; Cada dirección de memoria apunta a un bloque de 4 byte
                       s de tamaño
   16 00000000         
   17 00000000 20000000 
                       RXPIN   EQU              0x20000000  ; Etiqueta del espa
                                                            cio de memoria dond
                                                            e se asigna el pin 
                                                            RX del ESP8266
   18 00000000 20000004 
                       TXPIN   EQU              0x20000004  ; Etiqueta del espa
                                                            cio de memoria dond
                                                            e se asigna el pin 
                                                            TX del ESP8266
   19 00000000 20000008 
                       BRS     EQU              0X20000008  ; Etiqueta del espa
                                                            cio de memoria dond
                                                            e se asigna el Baud
                                                             Rate Serial
   20 00000000 2000000C 
                       EMC1    EQU              0x2000000C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de
                                                            l Módulo Wifi Parte
                                                             1
   21 00000000 20000010 
                       EMC2    EQU              0x20000010  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de



ARM Macro Assembler    Page 2 


                                                            l Módulo Wifi Parte
                                                             2
   22 00000000 20000014 
                       EMC3    EQU              0x20000014  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de
                                                            l Módulo Wifi Parte
                                                             3
   23 00000000 20000018 
                       EMC4    EQU              0x20000018  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de
                                                            l Módulo Wifi Parte
                                                             4
   24 00000000 2000001C 
                       EMC5    EQU              0x2000001C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de
                                                            l Módulo Wifi Parte
                                                             5
   25 00000000 20000020 
                       EMC6    EQU              0x20000020  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el Enable Multiple
                                                             Connections TCP de
                                                            l Módulo Wifi Parte
                                                             6
   26 00000000 20000024 
                       TCPS1   EQU              0x20000024  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 1
   27 00000000 20000028 
                       TCPS2   EQU              0x20000028  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 2
   28 00000000 2000002C 
                       TCPS3   EQU              0x2000002C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 3
   29 00000000 20000030 
                       TCPS4   EQU              0x20000030  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 4
   30 00000000 20000034 
                       TCPS5   EQU              0x20000034  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 5
   31 00000000 20000038 
                       TCPS6   EQU              0x20000038  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M



ARM Macro Assembler    Page 3 


                                                            ódulo Wifi Parte 6
   32 00000000 2000003C 
                       TCPS7   EQU              0x2000003C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el TCP Start del M
                                                            ódulo Wifi Parte 7 
                                                            
   33 00000000 20000040 
                       TCP     EQU              0x20000040  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el valor de activa
                                                            ción de TCP 
   34 00000000 20000044 
                       IPS1    EQU              0x20000044  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 1
   35 00000000 20000048 
                       IPS2    EQU              0x20000048  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 2 
   36 00000000 2000004C 
                       IPS3    EQU              0x2000004C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 3 
   37 00000000 20000050 
                       IPS4    EQU              0x20000050  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 4
   38 00000000 20000054 
                       IPS5    EQU              0x20000054  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 5
   39 00000000 20000058 
                       IPS6    EQU              0x20000058  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la IP del Server P
                                                            arte 6 
   40 00000000 2000005C 
                       PTCP    EQU              0x2000005C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el puerto TCP de c
                                                            omunicación con el 
                                                            módulo de Wifi 
   41 00000000 20000060 
                       EDMW1   EQU              0x20000060  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 1
   42 00000000 20000064 
                       EDMW2   EQU              0x20000064  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi



ARM Macro Assembler    Page 4 


                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 2
   43 00000000 20000068 
                       EDMW3   EQU              0x20000068  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 3
   44 00000000 2000006C 
                       EDMW4   EQU              0x2000006C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 4
   45 00000000 20000070 
                       EDMW5   EQU              0x20000070  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 5
   46 00000000 20000074 
                       EDMW6   EQU              0x20000074  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 6
   47 00000000 20000078 
                       EDMW7   EQU              0x20000078  ; Etiqueta del espa
                                                            cio de memoria para
                                                             el comando de Envi
                                                            ar Datos por medio 
                                                            del Módulo de Wifi 
                                                            Parte 7
   48 00000000 2000007C 
                       URL1    EQU              0x2000007C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 1
   49 00000000 20000080 
                       URL2    EQU              0x20000080  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 2
   50 00000000 20000084 
                       URL3    EQU              0x20000084  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 3
   51 00000000 20000088 
                       URL4    EQU              0x20000088  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 4
   52 00000000 2000008C 



ARM Macro Assembler    Page 5 


                       URL5    EQU              0x2000008C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 5
   53 00000000 20000090 
                       URL6    EQU              0x20000090  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 6
   54 00000000 20000094 
                       URL7    EQU              0x20000094  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 7
   55 00000000 20000098 
                       URL8    EQU              0x20000098  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 8
   56 00000000 2000009C 
                       URL9    EQU              0x2000009C  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 9
   57 00000000 200000A0 
                       URL10   EQU              0x200000A0  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 10
   58 00000000 200000A4 
                       URL11   EQU              0x200000A4  ; Etiqueta del espa
                                                            cio de memoria para
                                                             la URL de comunica
                                                            ción Parte 11
   59 00000000 200000A8 
                       G4BS    EQU              0x200000A8  ; Etiqueta del espa
                                                            cio de memoria que 
                                                            representa el GET d
                                                            e 4 Bytes que se ob
                                                            tienen a través de 
                                                            la comunicación ser
                                                            ial
   60 00000000 200000AC 
                       DCT     EQU              0x200000AC  ; Etiqueta del espa
                                                            cio de memoria que 
                                                            indica el inicio do
                                                            nde se almacenan lo
                                                            s datos de la cámar
                                                            a térmica
   61 00000000 200002A0 
                       DCDD    EQU              0x200002A0  ; Etiqueta del espa
                                                            cio de memoria que 
                                                            indica el inicio do
                                                            nde se almacenan lo
                                                            s datos de la cámar
                                                            a de distancia
   62 00000000 20000494 
                       P4BS    EQU              0x20000494  ; Etiqueta del espa
                                                            cio de memoria que 



ARM Macro Assembler    Page 6 


                                                            representa el POST 
                                                            de 4 Bytes que se m
                                                            andan a través de l
                                                            a comunicación seri
                                                            al
   63 00000000 20000498 
                       DMS     EQU              0x20000498  ; Etiqueta del espa
                                                            cio de memoria que 
                                                            indica el inicio do
                                                            nde se almacenan lo
                                                            s datos del mensaje
                                                             obtenido por el se
                                                            rver
   64 00000000 200004C4 
                       DAS     EQU              0x200004C4  ; Etiqueta del espa
                                                            cio de memoria dond
                                                            e se almacena el ac
                                                            tivador de las alar
                                                            mas de acuerdo a lo
                                                             que diga el server
                                                             
   65 00000000         
   66 00000000         
   67 00000000         ; Código del programa principal
   68 00000000         
   69 00000000                 AREA             Main, CODE, READONLY
   70 00000000                 ENTRY
   71 00000000                 EXPORT           __main
   72 00000000         
   73 00000000         __main
   74 00000000         
   75 00000000         ; Conjunto de Branches que representan el esqueleto del 
                       código
   76 00000000         
   77 00000000 F000 F808       BL               SMW         ; Branch de la subr
                                                            utina SMW = Setup d
                                                            el Módulo de Wifi
   78 00000004 F000 F8DC 
                       INF     BL               GDC         ; Branch de la subr
                                                            utina GDC = Get de 
                                                            los Datos de las Cá
                                                            maras
   79 00000008 F000 F98D       BL               PDS         ; Branch de la subr
                                                            utina PDS = Post de
                                                             los Datos al Serve
                                                            r
   80 0000000C F000 FA38       BL               GMA         ; Branch de la subr
                                                            utina GMA = Get del
                                                             Mensaje y de la Al
                                                            arma
   81 00000010 F000 FAE6       BL               EMA         ; Branch de la subr
                                                            utina EMA = Escritu
                                                            ra del Mensaje en e
                                                            l LCD y activar las
                                                             Alarmas
   82 00000014         
   83 00000014         
   84 00000014         ; Paso #0
   85 00000014         ; Subrutina que se encarga de hacer el setup de los pine



ARM Macro Assembler    Page 7 


                       s y las condiciones requeridas por el módulo de Wifi ESP
                       8266
   86 00000014         
   87 00000014         ;Se establecen los pines en que va a funcionar el módulo
                       
   88 00000014 F04F 0602 
                       SMW     MOV              R6,#2
   89 00000018 F04F 0703       MOV              R7,#3
   90 0000001C F04F 5800       LDR              R8,=RXPIN   ; RX se establce en
                                                             el pin 2
   91 00000020 F8C8 6000       STR              R6,[R8]
   92 00000024 F8DF 800C       LDR              R8,=TXPIN   ; TX se establece e
                                                            n el pin 3 
   93 00000028 F8C8 7000       STR              R7,[R8]
   94 0000002C         
   95 0000002C         ; Se establece el Baudrate de la comunicación serial 
   96 0000002C F44F 5616       MOV              R6,#9600
   97 00000030 4F01            LDR              R7,=BRS     ; Se inicializa la 
                                                            velocidad de comuni
                                                            cación serial en 96
                                                            00
   98 00000032 00 00 20000004 
              20000008         LTORG
   99 0000003C 603E            STR              R6,[R7]
  100 0000003E         
  101 0000003E         ; Se alamcena un valor simbólico en el espacio de memori
                       a donde se obtendrían los 4 bytes al hacer un GET al Ser
                       ver del sistema
  102 0000003E F64F 77FF       MOV              R7,0x0000FFFF
  103 00000042 F8DF 85A0       LDR              R8,=G4BS
  104 00000046 F8C8 7000       STR              R7,[R8]
  105 0000004A         
  106 0000004A         ; Se hace un delay de 2 milisegundos (En este caso se es
                       peran 2 tiempos simbólicos)
  107 0000004A F04F 0602       MOV              R6,#2
  108 0000004E B116    DL2     CBZ              R6,SMW2     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R6(contador del del
                                                            ay en este caso) se
                                                            a cero
  109 00000050 F1A6 0601       SUB              R6,R6,#1
  110 00000054 E7FB            B                DL2         ; Ciclo DL2 = Delay
                                                             de 2 tiempos
  111 00000056         
  112 00000056         
  113 00000056         ; Establecer conexiones múltiples TCP en el módulo  Wifi
                       , con el comando AT: AT+CIPMUX=1 = 0x41542B4349504D55583
                       D31
  114 00000056 F244 1754 
                       SMW2    MOV              R7, 0x4154
  115 0000005A F8DF 858C       LDR              R8,=EMC1
  116 0000005E F8C8 7000       STR              R7,[R8]
  117 00000062 F642 3743       MOV              R7,0x2B43
  118 00000066 F8DF 8584       LDR              R8,=EMC2
  119 0000006A F8C8 7000       STR              R7,[R8]
  120 0000006E F644 1750       MOV              R7,0x4950
  121 00000072 F8DF 857C       LDR              R8,=EMC3
  122 00000076 F8C8 7000       STR              R7,[R8]
  123 0000007A F644 5755       MOV              R7,0x4D55



ARM Macro Assembler    Page 8 


  124 0000007E F8DF 8574       LDR              R8,=EMC4
  125 00000082 F8C8 7000       STR              R7,[R8]
  126 00000086 F645 073D       MOV              R7,0x583D
  127 0000008A F8DF 856C       LDR              R8,=EMC5
  128 0000008E F8C8 7000       STR              R7,[R8]
  129 00000092 F04F 0731       MOV              R7,0x31
  130 00000096 F8DF 8564       LDR              R8,=EMC6
  131 0000009A F8C8 7000       STR              R7,[R8]
  132 0000009E         
  133 0000009E         
  134 0000009E         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  135 0000009E F04F 0701       MOV              R7,#1
  136 000000A2 B117    DL1     CBZ              R7,SMW3     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  137 000000A4 F1A7 0701       SUB              R7,R7,#1
  138 000000A8 E7FB            B                DL1         ; Ciclo DL1 = Prime
                                                            r Delay de 1 tiempo
                                                            
  139 000000AA         
  140 000000AA         ; Se establece una conexión TCP cliente al servidor del 
                       sistema, dando como párametros el IP del Server y el pue
                       rto de comunicación
  141 000000AA         ; Se utiliza el comando AT+CIPSTART=4 = 0x41542b43495053
                       544152543d34 
  142 000000AA F244 1754 
                       SMW3    MOV              R7, 0x4154
  143 000000AE F8DF 8550       LDR              R8,=TCPS1
  144 000000B2 F8C8 7000       STR              R7,[R8]
  145 000000B6 F642 3743       MOV              R7, 0x2B43
  146 000000BA F8DF 8548       LDR              R8,=TCPS2
  147 000000BE F8C8 7000       STR              R7,[R8]
  148 000000C2 F644 1750       MOV              R7, 0x4950
  149 000000C6 F8DF 8540       LDR              R8,=TCPS3
  150 000000CA F8C8 7000       STR              R7,[R8]
  151 000000CE F245 3754       MOV              R7, 0x5354
  152 000000D2 F8DF 8538       LDR              R8,=TCPS4
  153 000000D6 F8C8 7000       STR              R7,[R8]
  154 000000DA F244 1752       MOV              R7, 0x4152
  155 000000DE F8DF 8530       LDR              R8,=TCPS5
  156 000000E2 F8C8 7000       STR              R7,[R8]
  157 000000E6 F245 473D       MOV              R7, 0x543D
  158 000000EA F8DF 8528       LDR              R8,=TCPS6
  159 000000EE F8C8 7000       STR              R7,[R8]
  160 000000F2 F04F 0734       MOV              R7, 0x34
  161 000000F6 F8DF 8520       LDR              R8,=TCPS7
  162 000000FA F8C8 7000       STR              R7,[R8]
  163 000000FE         
  164 000000FE         ; Se establece el valor de TCP en 1 para indicar el tipo
                        de conexión
  165 000000FE F04F 0701       MOV              R7, #1
  166 00000102 F8DF 8518       LDR              R8,=TCP
  167 00000106 F8C8 7000       STR              R7,[R8]
  168 0000010A         
  169 0000010A         ; Se establece el valor de la IP:192.168.1.19 = 0x313932
                       2e3136382e312e310a



ARM Macro Assembler    Page 9 


  170 0000010A F243 1739       MOV              R7, 0x3139
  171 0000010E F8DF 8510       LDR              R8,=IPS1
  172 00000112 F8C8 7000       STR              R7,[R8]
  173 00000116 F243 272E       MOV              R7, 0x322E
  174 0000011A F8DF 8508       LDR              R8,=IPS2
  175 0000011E F8C8 7000       STR              R7,[R8]
  176 00000122 F243 1736       MOV              R7, 0x3136
  177 00000126 F8DF 8500       LDR              R8,=IPS3
  178 0000012A F8C8 7000       STR              R7,[R8]
  179 0000012E F643 072E       MOV              R7, 0x382E
  180 00000132 F8DF 84F8       LDR              R8,=IPS4
  181 00000136 F8C8 7000       STR              R7,[R8]
  182 0000013A F243 172E       MOV              R7, 0x312E
  183 0000013E F8DF 84F0       LDR              R8,=IPS5
  184 00000142 F8C8 7000       STR              R7,[R8]
  185 00000146 F243 170A       MOV              R7, 0x310A
  186 0000014A F8DF 84E8       LDR              R8,=IPS6
  187 0000014E F8C8 7000       STR              R7,[R8]
  188 00000152         
  189 00000152         ; Se define el puerto de comunicación EN 8080
  190 00000152 F641 7790       MOV              R7, #8080
  191 00000156 F8DF 84E0       LDR              R8,=PTCP
  192 0000015A F8C8 7000       STR              R7,[R8]
  193 0000015E         
  194 0000015E         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  195 0000015E F04F 0701       MOV              R7,#1
  196 00000162 B117    DL12    CBZ              R7,SMW4     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  197 00000164 F1A7 0701       SUB              R7,R7,#1
  198 00000168 E7FB            B                DL12        ; Ciclo DL12 = Segu
                                                            ndo Delay de 1 tiem
                                                            po
  199 0000016A         
  200 0000016A         ; Establecer el comando AT para poder enviar datos atrav
                       és del módulo de wifi
  201 0000016A         ; En este caso se utiliza el comando AT+CIPSEND=4 : 0x41
                       542b43495053454e443d340a
  202 0000016A F244 1754 
                       SMW4    MOV              R7, 0x4154
  203 0000016E F8DF 84CC       LDR              R8,=EDMW1
  204 00000172 F8C8 7000       STR              R7,[R8]
  205 00000176 F642 3743       MOV              R7, 0x2B43
  206 0000017A F8DF 84C4       LDR              R8,=EDMW2
  207 0000017E F8C8 7000       STR              R7,[R8]
  208 00000182 F644 1750       MOV              R7, 0x4950
  209 00000186 F8DF 84BC       LDR              R8,=EDMW3
  210 0000018A F8C8 7000       STR              R7,[R8]
  211 0000018E F245 3745       MOV              R7, 0x5345
  212 00000192 F8DF 84B4       LDR              R8,=EDMW4
  213 00000196 F8C8 7000       STR              R7,[R8]
  214 0000019A F644 6744       MOV              R7, 0x4E44
  215 0000019E F8DF 84AC       LDR              R8,=EDMW5
  216 000001A2 F8C8 7000       STR              R7,[R8]
  217 000001A6 F643 5734       MOV              R7, 0x3D34
  218 000001AA F8DF 84A4       LDR              R8,=EDMW6



ARM Macro Assembler    Page 10 


  219 000001AE F8C8 7000       STR              R7,[R8]
  220 000001B2 F04F 070A       MOV              R7, 0x0A
  221 000001B6 F8DF 849C       LDR              R8,=EDMW7
  222 000001BA F8C8 7000       STR              R7,[R8]
  223 000001BE 4770            BX               LR          ; Se regresa al flu
                                                            jo principal del pr
                                                            ograma
  224 000001C0         
  225 000001C0         ; Paso #1  
  226 000001C0         ; Subrutina que se encarga de hacer el request GET de lo
                       s datos de la cámara térmica y de la cámara de distancia
                       
  227 000001C0         
  228 000001C0         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación GET, para obtener los datos de la cá
                       mara térmica
  229 000001C0         ; GET/CT.html HTTP/1.1 = 0x4745542f43542e68746d6c2048545
                       4502f312e31
  230 000001C0 F244 7745 
                       GDC     MOV              R7, 0x4745
  231 000001C4 F8DF 8490       LDR              R8,=URL1
  232 000001C8 F8C8 7000       STR              R7,[R8]
  233 000001CC F245 472F       MOV              R7, 0x542F
  234 000001D0 F8DF 8488       LDR              R8,=URL2
  235 000001D4 F8C8 7000       STR              R7,[R8]
  236 000001D8 F244 3754       MOV              R7, 0x4354
  237 000001DC F8DF 8480       LDR              R8,=URL3
  238 000001E0 F8C8 7000       STR              R7,[R8]
  239 000001E4 F642 6768       MOV              R7, 0x2E68
  240 000001E8 F8DF 8478       LDR              R8,=URL4
  241 000001EC F8C8 7000       STR              R7,[R8]
  242 000001F0 F247 476D       MOV              R7, 0x746D
  243 000001F4 F8DF 8470       LDR              R8,=URL5
  244 000001F8 F8C8 7000       STR              R7,[R8]
  245 000001FC F646 4720       MOV              R7, 0x6C20
  246 00000200 F8DF 8468       LDR              R8,=URL6
  247 00000204 F8C8 7000       STR              R7,[R8]
  248 00000208 F644 0754       MOV              R7, 0x4854
  249 0000020C F8DF 8460       LDR              R8,=URL7
  250 00000210 F8C8 7000       STR              R7,[R8]
  251 00000214 F245 4750       MOV              R7, 0x5450
  252 00000218 F8DF 8458       LDR              R8,=URL8
  253 0000021C F8C8 7000       STR              R7,[R8]
  254 00000220 F642 7731       MOV              R7, 0x2F31
  255 00000224 F8DF 8450       LDR              R8,=URL9
  256 00000228 F8C8 7000       STR              R7,[R8]
  257 0000022C F642 6731       MOV              R7, 0x2E31
  258 00000230 F8DF 8448       LDR              R8,=URL10
  259 00000234 F8C8 7000       STR              R7,[R8]
  260 00000238 F04F 0700       MOV              R7,#0
  261 0000023C F8DF 8440       LDR              R8,=URL11
  262 00000240 F8C8 7000       STR              R7,[R8]
  263 00000244         
  264 00000244         
  265 00000244         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  266 00000244 F04F 0701       MOV              R7,#1
  267 00000248 B117    DL13    CBZ              R7,GDC2     ; Básicamente lo sa
                                                            ca del loop cuando 



ARM Macro Assembler    Page 11 


                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  268 0000024A F1A7 0701       SUB              R7,R7,#1
  269 0000024E E7FB            B                DL13        ; Ciclo DL13 = Terc
                                                            er Delay de 1 tiemp
                                                            o
  270 00000250         
  271 00000250         
  272 00000250         
  273 00000250         ; Ciclo que realiza el GET de los datos de la cámara tér
                       mica
  274 00000250 F04F 0600 
                       GDC2    MOV              R6,#0       ; Se establece el c
                                                            ontador en 0
  275 00000254 4FE3            LDR              R7,=G4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se obtiene
                                                            n los datos del GET
                                                            
  276 00000256 F5B6 7FFA 
                       GDC3    CMP              R6,#500     ; El valor real es 
                                                            153600, para efecto
                                                            s de prueba se deja
                                                             en 500
  277 0000025A D007            BEQ              GDC4
  278 0000025C BF1F 6838       LDRNE            CT,[R7]     ; Se almacena el co
                                                            ntenido de la direc
                                                            ción guardada en R7
                                                             en el registro de 
                                                            la cámara térmica
  279 00000260 F8DF 8420       LDRNE            R8,=DCT     ; Se almacena en R8
                                                             la dirección de me
                                                            moria donde se alma
                                                            cenan los datos de 
                                                            la cámara térmica
  280 00000264         
  281 00000264         ; Para guardar los datos de la cámara se usa como base e
                       l valor inicial de R8 y se le suma el offset correspondi
                       ente al valor actual del contador
  282 00000264 F848 0006       STRNE            CT,[R8,R6]  ; Se guarda lo que 
                                                            hay en el registro 
                                                            de la cámara térmic
                                                            a en la dirección d
                                                            e memoria correspon
                                                            diente
  283 00000268 1D36            ADDNE            R6,R6,#4    ; Se incrementa el 
                                                            contador en 4, que 
                                                            es el tamaño de los
                                                             bloques de memoria
                                                             (4 bytes)
  284 0000026A D1F4            BNE              GDC3
  285 0000026C         
  286 0000026C         
  287 0000026C         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación GET, para obtener los datos de la cá
                       mara de distancia
  288 0000026C         ; GET/CD.html HTTP/1.1 = 0x4745542f43442e68746d6c2048545
                       4502f312e31



ARM Macro Assembler    Page 12 


  289 0000026C F244 7745 
                       GDC4    MOV              R7, 0x4745
  290 00000270 F8DF 83E4       LDR              R8,=URL1
  291 00000274 F8C8 7000       STR              R7,[R8]
  292 00000278 F245 472F       MOV              R7, 0x542F
  293 0000027C F8DF 83DC       LDR              R8,=URL2
  294 00000280 F8C8 7000       STR              R7,[R8]
  295 00000284 F244 3744       MOV              R7, 0x4344
  296 00000288 F8DF 83D4       LDR              R8,=URL3
  297 0000028C F8C8 7000       STR              R7,[R8]
  298 00000290 F642 6768       MOV              R7, 0x2E68
  299 00000294 F8DF 83CC       LDR              R8,=URL4
  300 00000298 F8C8 7000       STR              R7,[R8]
  301 0000029C F247 476D       MOV              R7, 0x746D
  302 000002A0 F8DF 83C4       LDR              R8,=URL5
  303 000002A4 F8C8 7000       STR              R7,[R8]
  304 000002A8 F646 4720       MOV              R7, 0x6C20
  305 000002AC F8DF 83BC       LDR              R8,=URL6
  306 000002B0 F8C8 7000       STR              R7,[R8]
  307 000002B4 F644 0754       MOV              R7, 0x4854
  308 000002B8 F8DF 83B4       LDR              R8,=URL7
  309 000002BC F8C8 7000       STR              R7,[R8]
  310 000002C0 F245 4750       MOV              R7, 0x5450
  311 000002C4 F8DF 83AC       LDR              R8,=URL8
  312 000002C8 F8C8 7000       STR              R7,[R8]
  313 000002CC F642 7731       MOV              R7, 0x2F31
  314 000002D0 F8DF 83A4       LDR              R8,=URL9
  315 000002D4 F8C8 7000       STR              R7,[R8]
  316 000002D8 F642 6731       MOV              R7, 0x2E31
  317 000002DC F8DF 839C       LDR              R8,=URL10
  318 000002E0 F8C8 7000       STR              R7,[R8]
  319 000002E4 F04F 0700       MOV              R7,#0
  320 000002E8 F8DF 8394       LDR              R8,=URL11
  321 000002EC F8C8 7000       STR              R7,[R8]
  322 000002F0         
  323 000002F0         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  324 000002F0 F04F 0701       MOV              R7,#1
  325 000002F4 B117    DL14    CBZ              R7,GDC5     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  326 000002F6 F1A7 0701       SUB              R7,R7,#1
  327 000002FA E7FB            B                DL14        ; Ciclo DL14 = Cuar
                                                            to Delay de 1 tiemp
                                                            o
  328 000002FC         
  329 000002FC         
  330 000002FC         ; Ciclo que realiza el GET de los datos de la cámara de 
                       distancia
  331 000002FC         ; Se almacena otro valor simbólico en el espacio de memo
                       ria donde se obtendrían los 4 bytes al hacer un GET al S
                       erver del sistema. Esto para revisar en memoria y simula
                       r el envío de datos distintos
  332 000002FC F64D 57DD 
                       GDC5    MOV              R7,0x0000DDDD
  333 00000300 F8DF 82E0       LDR              R8,=G4BS
  334 00000304 F8C8 7000       STR              R7,[R8]



ARM Macro Assembler    Page 13 


  335 00000308 F04F 0600       MOV              R6,#0       ; Se establece el c
                                                            ontador en 0
  336 0000030C 4FB5            LDR              R7,=G4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se obtiene
                                                            n los datos del GET
                                                            
  337 0000030E F5B6 7FFA 
                       GDC6    CMP              R6,#500     ; El valor real es 
                                                            4147200, para efect
                                                            os de prueba se dej
                                                            a en 500
  338 00000312 D007            BEQ              GDC7
  339 00000314 BF1F 6839       LDRNE            CD,[R7]     ; Se almacena el co
                                                            ntenido de la direc
                                                            ción guardada en R7
                                                             en el registro de 
                                                            la cámara de distan
                                                            cia
  340 00000318 F8DF 836C       LDRNE            R8,=DCDD    ; Se almacena en R8
                                                             la dirección de me
                                                            moria donde se alma
                                                            cenan los datos de 
                                                            la cámara de distan
                                                            cia
  341 0000031C         
  342 0000031C         ; Para guardar los datos de la cámara se usa como base e
                       l valor inicial de R8 y se le suma el offset correspondi
                       ente al valor actual del contador
  343 0000031C F848 1006       STRNE            CD,[R8,R6]  ; Se guarda lo que 
                                                            hay en el registro 
                                                            de la cámara de dis
                                                            tancia en la direcc
                                                            ión de memoria corr
                                                            espondiente
  344 00000320 1D36            ADDNE            R6,R6,#4    ; Se incrementa el 
                                                            contador en 4, que 
                                                            es el tamaño de los
                                                             bloques de memoria
                                                             (4 bytes)
  345 00000322 D1F4            BNE              GDC6
  346 00000324         
  347 00000324 4770    GDC7    BX               LR          ; Se regresa al flu
                                                            jo principal del pr
                                                            ograma
  348 00000326         
  349 00000326         
  350 00000326         
  351 00000326         ; Paso #2
  352 00000326         ; Subrutina que se encarga de hacer el request POST de l
                       os datos obtenidos de las cámaras al Server del sistema
  353 00000326         
  354 00000326         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación POST, para mandar los datos de la cá
                       mara térmica
  355 00000326         ; POST/CT.html HTTP/1.1 = 0x504f53542f43542e68746d6c2048
                       5454502f312e31
  356 00000326 F245 074F 
                       PDS     MOV              R7, 0x504F



ARM Macro Assembler    Page 14 


  357 0000032A F8DF 832C       LDR              R8,=URL1
  358 0000032E F8C8 7000       STR              R7,[R8]
  359 00000332 F245 3754       MOV              R7, 0x5354
  360 00000336 F8DF 8324       LDR              R8,=URL2
  361 0000033A F8C8 7000       STR              R7,[R8]
  362 0000033E F642 7743       MOV              R7, 0x2F43
  363 00000342 F8DF 831C       LDR              R8,=URL3
  364 00000346 F8C8 7000       STR              R7,[R8]
  365 0000034A F245 472E       MOV              R7, 0x542E
  366 0000034E F8DF 8314       LDR              R8,=URL4
  367 00000352 F8C8 7000       STR              R7,[R8]
  368 00000356 F646 0774       MOV              R7, 0x6874
  369 0000035A F8DF 830C       LDR              R8,=URL5
  370 0000035E F8C8 7000       STR              R7,[R8]
  371 00000362 F646 576C       MOV              R7, 0x6D6C
  372 00000366 F8DF 8304       LDR              R8,=URL6
  373 0000036A F8C8 7000       STR              R7,[R8]
  374 0000036E F242 0748       MOV              R7, 0x2048
  375 00000372 F8DF 82FC       LDR              R8,=URL7
  376 00000376 F8C8 7000       STR              R7,[R8]
  377 0000037A F245 4754       MOV              R7, 0x5454
  378 0000037E F8DF 82F4       LDR              R8,=URL8
  379 00000382 F8C8 7000       STR              R7,[R8]
  380 00000386 F245 072F       MOV              R7, 0x502F
  381 0000038A F8DF 82EC       LDR              R8,=URL9
  382 0000038E F8C8 7000       STR              R7,[R8]
  383 00000392 F243 172E       MOV              R7, 0x312E
  384 00000396 F8DF 82E4       LDR              R8,=URL10
  385 0000039A F8C8 7000       STR              R7,[R8]
  386 0000039E F04F 0731       MOV              R7,0x31
  387 000003A2 F8DF 82DC       LDR              R8,=URL11
  388 000003A6 F8C8 7000       STR              R7,[R8]
  389 000003AA         
  390 000003AA         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  391 000003AA F04F 0701       MOV              R7,#1
  392 000003AE B117    DL15    CBZ              R7,PDS2     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  393 000003B0 F1A7 0701       SUB              R7,R7,#1
  394 000003B4 E7FB            B                DL15        ; Ciclo DL15 = Quin
                                                            to Delay de 1 tiemp
                                                            o
  395 000003B6         
  396 000003B6         ; Ciclo que realiza el POST de los datos de la cámara té
                       rmica
  397 000003B6 F04F 0600 
                       PDS2    MOV              R6,#0       ; Se establece el c
                                                            ontador en 0
  398 000003BA 4FB4            LDR              R7,=P4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se guardan
                                                             los datos que será
                                                            n enviados mediante
                                                             la instrucción POS
                                                            T
  399 000003BC F8DF 82C4       LDR              R8,=DCT     ; Se carga en R8 la



ARM Macro Assembler    Page 15 


                                                             dirección de memor
                                                            ia donde comienzan 
                                                            los datos de la cám
                                                            ara térmica
  400 000003C0 F5B6 7FFA 
                       PDS3    CMP              R6,#500     ; El valor real es 
                                                            153600, para efecto
                                                            s de prueba se deja
                                                             en 500
  401 000003C4 D005            BEQ              PDS4
  402 000003C6 BF1E F858 
              0006             LDRNE            CT,[R8,R6]
  403 000003CC 6038            STRNE            CT,[R7]
  404 000003CE 1D36            ADDNE            R6,R6,#4    ; Se incrementa el 
                                                            contador en 4, que 
                                                            es el tamaño de los
                                                             bloques de memoria
                                                             (4 bytes)
  405 000003D0 D1F6            BNE              PDS3
  406 000003D2         
  407 000003D2         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación POST, para mandar los datos de la cá
                       mara de distancia
  408 000003D2         ; POST/CD.html HTTP/1.1 = 0x504f53542f43442e68746d6c2048
                       5454502f312e31
  409 000003D2 F245 074F 
                       PDS4    MOV              R7, 0x504F
  410 000003D6 F8DF 8280       LDR              R8,=URL1
  411 000003DA F8C8 7000       STR              R7,[R8]
  412 000003DE F245 3754       MOV              R7, 0x5354
  413 000003E2 F8DF 8278       LDR              R8,=URL2
  414 000003E6 F8C8 7000       STR              R7,[R8]
  415 000003EA F642 7743       MOV              R7, 0x2F43
  416 000003EE F8DF 8270       LDR              R8,=URL3
  417 000003F2 F8C8 7000       STR              R7,[R8]
  418 000003F6 F244 472E       MOV              R7, 0x442E
  419 000003FA F8DF 8268       LDR              R8,=URL4
  420 000003FE F8C8 7000       STR              R7,[R8]
  421 00000402 F646 0774       MOV              R7, 0x6874
  422 00000406 F8DF 8260       LDR              R8,=URL5
  423 0000040A F8C8 7000       STR              R7,[R8]
  424 0000040E F646 576C       MOV              R7, 0x6D6C
  425 00000412 F8DF 8258       LDR              R8,=URL6
  426 00000416 F8C8 7000       STR              R7,[R8]
  427 0000041A F242 0748       MOV              R7, 0x2048
  428 0000041E F8DF 8250       LDR              R8,=URL7
  429 00000422 F8C8 7000       STR              R7,[R8]
  430 00000426 F245 4754       MOV              R7, 0x5454
  431 0000042A F8DF 8248       LDR              R8,=URL8
  432 0000042E F8C8 7000       STR              R7,[R8]
  433 00000432 F245 072F       MOV              R7, 0x502F
  434 00000436 F8DF 8240       LDR              R8,=URL9
  435 0000043A F8C8 7000       STR              R7,[R8]
  436 0000043E F243 172E       MOV              R7, 0x312E
  437 00000442 F8DF 8238       LDR              R8,=URL10
  438 00000446 F8C8 7000       STR              R7,[R8]
  439 0000044A F04F 0731       MOV              R7, 0x31
  440 0000044E F8DF 8230       LDR              R8,=URL11
  441 00000452 F8C8 7000       STR              R7,[R8]



ARM Macro Assembler    Page 16 


  442 00000456         
  443 00000456         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  444 00000456 F04F 0701       MOV              R7,#1
  445 0000045A B117    DL16    CBZ              R7,PDS5     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  446 0000045C F1A7 0701       SUB              R7,R7,#1
  447 00000460 E7FB            B                DL16        ; Ciclo DL16 = Sext
                                                            o Delay de 1 tiempo
                                                            
  448 00000462         
  449 00000462         
  450 00000462         ; Ciclo que realiza el POST de los datos de la cámara de
                        distancia
  451 00000462 F04F 0600 
                       PDS5    MOV              R6,#0       ; Se establece el c
                                                            ontador en 0
  452 00000466 4F89            LDR              R7,=P4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se guardan
                                                             los datos que será
                                                            n enviados mediante
                                                             la instrucción POS
                                                            T
  453 00000468 F8DF 821C       LDR              R8,=DCDD    ; Se carga en R8 la
                                                             dirección de memor
                                                            ia donde comienzan 
                                                            los datos de la cám
                                                            ara de distancia
  454 0000046C F5B6 7FFA 
                       PDS6    CMP              R6,#500     ; El valor real es 
                                                            4147200, para efect
                                                            os de prueba se dej
                                                            a en 500
  455 00000470 D005            BEQ              PDS7
  456 00000472 BF1E F858 
              1006             LDRNE            CD,[R8,R6]
  457 00000478 6039            STRNE            CD,[R7]
  458 0000047A 1D36            ADDNE            R6,R6,#4    ; Se incrementa el 
                                                            contador en 4, que 
                                                            es el tamaño de los
                                                             bloques de memoria
                                                             (4 bytes)
  459 0000047C D1F6            BNE              PDS6
  460 0000047E         
  461 0000047E 4770    PDS7    BX               LR          ; Se regresa al flu
                                                            jo principal del pr
                                                            ograma
  462 00000480         
  463 00000480         ; Paso #3
  464 00000480         ; Subrutina que se encarga de hacer el request GET al Se
                       rver del Mensaje de que se proyectará en el LCD y del có
                       digo de activación de las alarmas
  465 00000480         
  466 00000480         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación GET, para obtener los datos del mens



ARM Macro Assembler    Page 17 


                       aje del server
  467 00000480         ; GET/MS.html HTTP/1.1 = 0x4745542f4d532e68746d6c2048545
                       4502f312e31
  468 00000480 F244 7745 
                       GMA     MOV              R7, 0x4745
  469 00000484 F8DF 81D0       LDR              R8,=URL1
  470 00000488 F8C8 7000       STR              R7,[R8]
  471 0000048C F245 472F       MOV              R7, 0x542F
  472 00000490 F8DF 81C8       LDR              R8,=URL2
  473 00000494 F8C8 7000       STR              R7,[R8]
  474 00000498 F644 5753       MOV              R7, 0x4D53
  475 0000049C F8DF 81C0       LDR              R8,=URL3
  476 000004A0 F8C8 7000       STR              R7,[R8]
  477 000004A4 F642 6768       MOV              R7, 0x2E68
  478 000004A8 F8DF 81B8       LDR              R8,=URL4
  479 000004AC F8C8 7000       STR              R7,[R8]
  480 000004B0 F247 476D       MOV              R7, 0x746D
  481 000004B4 F8DF 81B0       LDR              R8,=URL5
  482 000004B8 F8C8 7000       STR              R7,[R8]
  483 000004BC F646 4720       MOV              R7, 0x6C20
  484 000004C0 F8DF 81A8       LDR              R8,=URL6
  485 000004C4 F8C8 7000       STR              R7,[R8]
  486 000004C8 F644 0754       MOV              R7, 0x4854
  487 000004CC F8DF 81A0       LDR              R8,=URL7
  488 000004D0 F8C8 7000       STR              R7,[R8]
  489 000004D4 F245 4750       MOV              R7, 0x5450
  490 000004D8 F8DF 8198       LDR              R8,=URL8
  491 000004DC F8C8 7000       STR              R7,[R8]
  492 000004E0 F642 7731       MOV              R7, 0x2F31
  493 000004E4 F8DF 8190       LDR              R8,=URL9
  494 000004E8 F8C8 7000       STR              R7,[R8]
  495 000004EC F642 6731       MOV              R7, 0x2E31
  496 000004F0 F8DF 8188       LDR              R8,=URL10
  497 000004F4 F8C8 7000       STR              R7,[R8]
  498 000004F8 F04F 0700       MOV              R7,#0
  499 000004FC F8DF 8180       LDR              R8,=URL11
  500 00000500 F8C8 7000       STR              R7,[R8]
  501 00000504         
  502 00000504         ; Se alamcena otro valor simbólico en el espacio de memo
                       ria donde se obtendrían los 4 bytes al hacer un GET al S
                       erver del sistema, para efectos de pruebas
  503 00000504 F64A 27AA       MOV              R7,0x0000AAAA
  504 00000508 F8DF 80D8       LDR              R8,=G4BS
  505 0000050C F8C8 7000       STR              R7,[R8]
  506 00000510         
  507 00000510         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  508 00000510 F04F 0701       MOV              R7,#1
  509 00000514 B117    DL17    CBZ              R7,GMA2     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  510 00000516 F1A7 0701       SUB              R7,R7,#1
  511 0000051A E7FB            B                DL17        ; Ciclo DL17 = Sépt
                                                            imo Delay de 1 tiem
                                                            po
  512 0000051C         
  513 0000051C         ; Ciclo que realiza el GET de los datos del mensaje del 



ARM Macro Assembler    Page 18 


                       server
  514 0000051C F04F 0600 
                       GMA2    MOV              R6,#0       ; Se establece el c
                                                            ontador en 0
  515 00000520 4F30            LDR              R7,=G4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se obtiene
                                                            n los datos del GET
                                                            
  516 00000522 2E2C    GMA3    CMP              R6,#44      ; Se deben llenar 1
                                                            1 bloques de memori
                                                            a con 4 bytes cada 
                                                            uno, para obtener e
                                                            l mensaje completo 
                                                            del server 
  517 00000524 D007            BEQ              GMA4
  518 00000526 BF1F 683B       LDRNE            MS,[R7]     ; Se almacena el co
                                                            ntenido de la direc
                                                            ción guardada en R7
                                                             en el registro del
                                                             mensaje del server
                                                            
  519 0000052A F8DF 8164       LDRNE            R8,=DMS     ; Se almacena en R8
                                                             la dirección de me
                                                            moria donde se alma
                                                            cenan los datos del
                                                             mensaje del server
                                                            
  520 0000052E         
  521 0000052E         ; Para guardar el mensaje del server se usa como base el
                        valor inicial de R8 y se le suma el offset correspondie
                       nte al valor actual del contador
  522 0000052E F848 3006       STRNE            MS,[R8,R6]  ; Se guarda lo que 
                                                            hay en el registro 
                                                            del mensaje del ser
                                                            ver en la dirección
                                                             de memoria corresp
                                                            ondiente
  523 00000532 1D36            ADDNE            R6,R6,#4    ; Se incrementa el 
                                                            contador en 4, que 
                                                            es el tamaño de los
                                                             bloques de memoria
                                                             (4 bytes)
  524 00000534 D1F5            BNE              GMA3
  525 00000536         
  526 00000536         ; Establecer la URL de Envío, que en este caso correspon
                       de con la Operación GET, para el valor de las alarmas en
                       viado por el server
  527 00000536         ; GET/AS.html HTTP/1.1 = 0x4745542f41532e68746d6c2048545
                       4502f312e31
  528 00000536 F244 7745 
                       GMA4    MOV              R7, 0x4745
  529 0000053A F8DF 811C       LDR              R8,=URL1
  530 0000053E F8C8 7000       STR              R7,[R8]
  531 00000542 F245 472F       MOV              R7, 0x542F
  532 00000546 F8DF 8114       LDR              R8,=URL2
  533 0000054A F8C8 7000       STR              R7,[R8]
  534 0000054E F244 1753       MOV              R7, 0x4153
  535 00000552 F8DF 810C       LDR              R8,=URL3



ARM Macro Assembler    Page 19 


  536 00000556 F8C8 7000       STR              R7,[R8]
  537 0000055A F642 6768       MOV              R7, 0x2E68
  538 0000055E F8DF 8104       LDR              R8,=URL4
  539 00000562 F8C8 7000       STR              R7,[R8]
  540 00000566 F247 476D       MOV              R7, 0x746D
  541 0000056A F8DF 80FC       LDR              R8,=URL5
  542 0000056E F8C8 7000       STR              R7,[R8]
  543 00000572 F646 4720       MOV              R7, 0x6C20
  544 00000576 F8DF 80F4       LDR              R8,=URL6
  545 0000057A F8C8 7000       STR              R7,[R8]
  546 0000057E F644 0754       MOV              R7, 0x4854
  547 00000582 F8DF 80EC       LDR              R8,=URL7
  548 00000586 F8C8 7000       STR              R7,[R8]
  549 0000058A F245 4750       MOV              R7, 0x5450
  550 0000058E F8DF 80E4       LDR              R8,=URL8
  551 00000592 F8C8 7000       STR              R7,[R8]
  552 00000596 F642 7731       MOV              R7, 0x2F31
  553 0000059A F8DF 80DC       LDR              R8,=URL9
  554 0000059E F8C8 7000       STR              R7,[R8]
  555 000005A2 F642 6731       MOV              R7, 0x2e31
  556 000005A6 F8DF 80D4       LDR              R8,=URL10
  557 000005AA F8C8 7000       STR              R7,[R8]
  558 000005AE F04F 0700       MOV              R7,#0
  559 000005B2 F8DF 80CC       LDR              R8,=URL11
  560 000005B6 F8C8 7000       STR              R7,[R8]
  561 000005BA         
  562 000005BA         ; Se alamcena otro valor simbólico en el espacio de memo
                       ria donde se obtendrían los 4 bytes al hacer un GET al S
                       erver del sistema, para efectos de pruebas
  563 000005BA F64E 27EA       MOV              R7,0x0000EAEA
  564 000005BE F8DF 8024       LDR              R8,=G4BS
  565 000005C2 F8C8 7000       STR              R7,[R8]
  566 000005C6         
  567 000005C6         ; Se hace un delay de 1 milisegundo (En este caso se esp
                       era 1 tiempo simbólico)
  568 000005C6 F04F 0701       MOV              R7,#1
  569 000005CA B117    DL18    CBZ              R7,GMA5     ; Básicamente lo sa
                                                            ca del loop cuando 
                                                            R7(contador del del
                                                            ay en este caso) se
                                                            a cero
  570 000005CC F1A7 0701       SUB              R7,R7,#1
  571 000005D0 E7FB            B                DL18        ; Ciclo DL18 = Octa
                                                            vo Delay de 1 tiemp
                                                            o
  572 000005D2         
  573 000005D2         ; Subrutina que se encarga de almacenar en memoria el va
                       lor obtenido al hacer el GET al Server del activador de 
                       las alarmas
  574 000005D2 4F04    GMA5    LDR              R7,=G4BS    ; Se carga en R7 la
                                                             dirección de memor
                                                            ia donde se obtiene
                                                            n los datos del GET
                                                            
  575 000005D4 F8DF 80BC       LDR              R8,=DAS     ; Se almacena en R8
                                                             la dirección de me
                                                            moria donde se alma
                                                            cenan los datos del
                                                             activador de las a



ARM Macro Assembler    Page 20 


                                                            larmas
  576 000005D8 683A            LDR              AS,[R7]
  577 000005DA F8C8 2000       STR              AS,[R8]
  578 000005DE 4770            BX               LR          ; Se regresa al flu
                                                            jo principal del pr
                                                            ograma
  579 000005E0         
  580 000005E0         
  581 000005E0         ; Paso #4
  582 000005E0         ; Subrutina que se encarga de mandar al LCD el mensaje o
                       btenido através del servidor y de activar o no las alarm
                       as dependiendo de lo obtenido por el Server
  583 000005E0         
  584 000005E0 F7FF FD10 
                       EMA     BL               INF         ; Se regresa al Bra
                                                            nch INF para genera
                                                            r un loop infinito 
                                                            que pase realizando
                                                             las peticiones GET
                                                            ,POST y activar o n
                                                            o las alarmas del s
                                                            istema
  585 000005E4         
  586 000005E4         
  587 000005E4                 END
              200000A8 
              2000000C 
              20000010 
              20000014 
              20000018 
              2000001C 
              20000020 
              20000024 
              20000028 
              2000002C 
              20000030 
              20000034 
              20000038 
              2000003C 
              20000040 
              20000044 
              20000048 
              2000004C 
              20000050 
              20000054 
              20000058 
              2000005C 
              20000060 
              20000064 
              20000068 
              2000006C 
              20000070 
              20000074 
              20000078 
              2000007C 
              20000080 
              20000084 
              20000088 
              2000008C 



ARM Macro Assembler    Page 21 


              20000090 
              20000094 
              20000098 
              2000009C 
              200000A0 
              200000A4 
              200000AC 
              200002A0 
              20000494 
              20000498 
              200004C4 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Cortex-M3 -IC:\Users\
User\AppData\Local\Arm\Packs\ARM\CMSIS\5.7.0\CMSIS\Core\Include -IC:\Users\User
\AppData\Local\Arm\Packs\ARM\CMSIS\5.7.0\Device\ARM\ARMCM3\Include --predefine=
"__EVAL SETA 1" --predefine="__MICROLIB SETA 1" --predefine="__UVISION_VERSION 
SETA 529" --predefine="_RTE_ SETA 1" --predefine="ARMCM3 SETA 1" --list=.\listi
ngs\main.lst main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

DL1 000000A2

Symbol: DL1
   Definitions
      At line 136 in file main.s
   Uses
      At line 138 in file main.s
Comment: DL1 used once
DL12 00000162

Symbol: DL12
   Definitions
      At line 196 in file main.s
   Uses
      At line 198 in file main.s
Comment: DL12 used once
DL13 00000248

Symbol: DL13
   Definitions
      At line 267 in file main.s
   Uses
      At line 269 in file main.s
Comment: DL13 used once
DL14 000002F4

Symbol: DL14
   Definitions
      At line 325 in file main.s
   Uses
      At line 327 in file main.s
Comment: DL14 used once
DL15 000003AE

Symbol: DL15
   Definitions
      At line 392 in file main.s
   Uses
      At line 394 in file main.s
Comment: DL15 used once
DL16 0000045A

Symbol: DL16
   Definitions
      At line 445 in file main.s
   Uses
      At line 447 in file main.s
Comment: DL16 used once
DL17 00000514

Symbol: DL17
   Definitions
      At line 509 in file main.s
   Uses
      At line 511 in file main.s
Comment: DL17 used once
DL18 000005CA

Symbol: DL18



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 569 in file main.s
   Uses
      At line 571 in file main.s
Comment: DL18 used once
DL2 0000004E

Symbol: DL2
   Definitions
      At line 108 in file main.s
   Uses
      At line 110 in file main.s
Comment: DL2 used once
EMA 000005E0

Symbol: EMA
   Definitions
      At line 584 in file main.s
   Uses
      At line 81 in file main.s
Comment: EMA used once
GDC 000001C0

Symbol: GDC
   Definitions
      At line 230 in file main.s
   Uses
      At line 78 in file main.s
Comment: GDC used once
GDC2 00000250

Symbol: GDC2
   Definitions
      At line 274 in file main.s
   Uses
      At line 267 in file main.s
Comment: GDC2 used once
GDC3 00000256

Symbol: GDC3
   Definitions
      At line 276 in file main.s
   Uses
      At line 284 in file main.s
Comment: GDC3 used once
GDC4 0000026C

Symbol: GDC4
   Definitions
      At line 289 in file main.s
   Uses
      At line 277 in file main.s
Comment: GDC4 used once
GDC5 000002FC

Symbol: GDC5
   Definitions
      At line 332 in file main.s
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

      At line 325 in file main.s
Comment: GDC5 used once
GDC6 0000030E

Symbol: GDC6
   Definitions
      At line 337 in file main.s
   Uses
      At line 345 in file main.s
Comment: GDC6 used once
GDC7 00000324

Symbol: GDC7
   Definitions
      At line 347 in file main.s
   Uses
      At line 338 in file main.s
Comment: GDC7 used once
GMA 00000480

Symbol: GMA
   Definitions
      At line 468 in file main.s
   Uses
      At line 80 in file main.s
Comment: GMA used once
GMA2 0000051C

Symbol: GMA2
   Definitions
      At line 514 in file main.s
   Uses
      At line 509 in file main.s
Comment: GMA2 used once
GMA3 00000522

Symbol: GMA3
   Definitions
      At line 516 in file main.s
   Uses
      At line 524 in file main.s
Comment: GMA3 used once
GMA4 00000536

Symbol: GMA4
   Definitions
      At line 528 in file main.s
   Uses
      At line 517 in file main.s
Comment: GMA4 used once
GMA5 000005D2

Symbol: GMA5
   Definitions
      At line 574 in file main.s
   Uses
      At line 569 in file main.s
Comment: GMA5 used once
INF 00000004



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Relocatable symbols


Symbol: INF
   Definitions
      At line 78 in file main.s
   Uses
      At line 584 in file main.s
Comment: INF used once
Main 00000000

Symbol: Main
   Definitions
      At line 69 in file main.s
   Uses
      None
Comment: Main unused
PDS 00000326

Symbol: PDS
   Definitions
      At line 356 in file main.s
   Uses
      At line 79 in file main.s
Comment: PDS used once
PDS2 000003B6

Symbol: PDS2
   Definitions
      At line 397 in file main.s
   Uses
      At line 392 in file main.s
Comment: PDS2 used once
PDS3 000003C0

Symbol: PDS3
   Definitions
      At line 400 in file main.s
   Uses
      At line 405 in file main.s
Comment: PDS3 used once
PDS4 000003D2

Symbol: PDS4
   Definitions
      At line 409 in file main.s
   Uses
      At line 401 in file main.s
Comment: PDS4 used once
PDS5 00000462

Symbol: PDS5
   Definitions
      At line 451 in file main.s
   Uses
      At line 445 in file main.s
Comment: PDS5 used once
PDS6 0000046C

Symbol: PDS6
   Definitions



ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Relocatable symbols

      At line 454 in file main.s
   Uses
      At line 459 in file main.s
Comment: PDS6 used once
PDS7 0000047E

Symbol: PDS7
   Definitions
      At line 461 in file main.s
   Uses
      At line 455 in file main.s
Comment: PDS7 used once
SMW 00000014

Symbol: SMW
   Definitions
      At line 88 in file main.s
   Uses
      At line 77 in file main.s
Comment: SMW used once
SMW2 00000056

Symbol: SMW2
   Definitions
      At line 114 in file main.s
   Uses
      At line 108 in file main.s
Comment: SMW2 used once
SMW3 000000AA

Symbol: SMW3
   Definitions
      At line 142 in file main.s
   Uses
      At line 136 in file main.s
Comment: SMW3 used once
SMW4 0000016A

Symbol: SMW4
   Definitions
      At line 202 in file main.s
   Uses
      At line 196 in file main.s
Comment: SMW4 used once
__main 00000000

Symbol: __main
   Definitions
      At line 73 in file main.s
   Uses
      At line 71 in file main.s
Comment: __main used once
36 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

BRS 20000008

Symbol: BRS
   Definitions
      At line 19 in file main.s
   Uses
      At line 97 in file main.s
Comment: BRS used once
DAS 200004C4

Symbol: DAS
   Definitions
      At line 64 in file main.s
   Uses
      At line 575 in file main.s
Comment: DAS used once
DCDD 200002A0

Symbol: DCDD
   Definitions
      At line 61 in file main.s
   Uses
      At line 340 in file main.s
      At line 453 in file main.s

DCT 200000AC

Symbol: DCT
   Definitions
      At line 60 in file main.s
   Uses
      At line 279 in file main.s
      At line 399 in file main.s

DMS 20000498

Symbol: DMS
   Definitions
      At line 63 in file main.s
   Uses
      At line 519 in file main.s
Comment: DMS used once
EDMW1 20000060

Symbol: EDMW1
   Definitions
      At line 41 in file main.s
   Uses
      At line 203 in file main.s
Comment: EDMW1 used once
EDMW2 20000064

Symbol: EDMW2
   Definitions
      At line 42 in file main.s
   Uses
      At line 206 in file main.s
Comment: EDMW2 used once
EDMW3 20000068



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols


Symbol: EDMW3
   Definitions
      At line 43 in file main.s
   Uses
      At line 209 in file main.s
Comment: EDMW3 used once
EDMW4 2000006C

Symbol: EDMW4
   Definitions
      At line 44 in file main.s
   Uses
      At line 212 in file main.s
Comment: EDMW4 used once
EDMW5 20000070

Symbol: EDMW5
   Definitions
      At line 45 in file main.s
   Uses
      At line 215 in file main.s
Comment: EDMW5 used once
EDMW6 20000074

Symbol: EDMW6
   Definitions
      At line 46 in file main.s
   Uses
      At line 218 in file main.s
Comment: EDMW6 used once
EDMW7 20000078

Symbol: EDMW7
   Definitions
      At line 47 in file main.s
   Uses
      At line 221 in file main.s
Comment: EDMW7 used once
EMC1 2000000C

Symbol: EMC1
   Definitions
      At line 20 in file main.s
   Uses
      At line 115 in file main.s
Comment: EMC1 used once
EMC2 20000010

Symbol: EMC2
   Definitions
      At line 21 in file main.s
   Uses
      At line 118 in file main.s
Comment: EMC2 used once
EMC3 20000014

Symbol: EMC3
   Definitions



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      At line 22 in file main.s
   Uses
      At line 121 in file main.s
Comment: EMC3 used once
EMC4 20000018

Symbol: EMC4
   Definitions
      At line 23 in file main.s
   Uses
      At line 124 in file main.s
Comment: EMC4 used once
EMC5 2000001C

Symbol: EMC5
   Definitions
      At line 24 in file main.s
   Uses
      At line 127 in file main.s
Comment: EMC5 used once
EMC6 20000020

Symbol: EMC6
   Definitions
      At line 25 in file main.s
   Uses
      At line 130 in file main.s
Comment: EMC6 used once
FALSE 00000000

Symbol: FALSE
   Definitions
      At line 4 in file main.s
   Uses
      None
Comment: FALSE unused
G4BS 200000A8

Symbol: G4BS
   Definitions
      At line 59 in file main.s
   Uses
      At line 103 in file main.s
      At line 275 in file main.s
      At line 333 in file main.s
      At line 336 in file main.s
      At line 504 in file main.s
      At line 515 in file main.s
      At line 564 in file main.s
      At line 574 in file main.s

IPS1 20000044

Symbol: IPS1
   Definitions
      At line 34 in file main.s
   Uses
      At line 171 in file main.s
Comment: IPS1 used once



ARM Macro Assembler    Page 4 Alphabetic symbol ordering
Absolute symbols

IPS2 20000048

Symbol: IPS2
   Definitions
      At line 35 in file main.s
   Uses
      At line 174 in file main.s
Comment: IPS2 used once
IPS3 2000004C

Symbol: IPS3
   Definitions
      At line 36 in file main.s
   Uses
      At line 177 in file main.s
Comment: IPS3 used once
IPS4 20000050

Symbol: IPS4
   Definitions
      At line 37 in file main.s
   Uses
      At line 180 in file main.s
Comment: IPS4 used once
IPS5 20000054

Symbol: IPS5
   Definitions
      At line 38 in file main.s
   Uses
      At line 183 in file main.s
Comment: IPS5 used once
IPS6 20000058

Symbol: IPS6
   Definitions
      At line 39 in file main.s
   Uses
      At line 186 in file main.s
Comment: IPS6 used once
P4BS 20000494

Symbol: P4BS
   Definitions
      At line 62 in file main.s
   Uses
      At line 398 in file main.s
      At line 452 in file main.s

PTCP 2000005C

Symbol: PTCP
   Definitions
      At line 40 in file main.s
   Uses
      At line 191 in file main.s
Comment: PTCP used once
RXPIN 20000000




ARM Macro Assembler    Page 5 Alphabetic symbol ordering
Absolute symbols

Symbol: RXPIN
   Definitions
      At line 17 in file main.s
   Uses
      At line 90 in file main.s
Comment: RXPIN used once
TCP 20000040

Symbol: TCP
   Definitions
      At line 33 in file main.s
   Uses
      At line 166 in file main.s
Comment: TCP used once
TCPS1 20000024

Symbol: TCPS1
   Definitions
      At line 26 in file main.s
   Uses
      At line 143 in file main.s
Comment: TCPS1 used once
TCPS2 20000028

Symbol: TCPS2
   Definitions
      At line 27 in file main.s
   Uses
      At line 146 in file main.s
Comment: TCPS2 used once
TCPS3 2000002C

Symbol: TCPS3
   Definitions
      At line 28 in file main.s
   Uses
      At line 149 in file main.s
Comment: TCPS3 used once
TCPS4 20000030

Symbol: TCPS4
   Definitions
      At line 29 in file main.s
   Uses
      At line 152 in file main.s
Comment: TCPS4 used once
TCPS5 20000034

Symbol: TCPS5
   Definitions
      At line 30 in file main.s
   Uses
      At line 155 in file main.s
Comment: TCPS5 used once
TCPS6 20000038

Symbol: TCPS6
   Definitions
      At line 31 in file main.s



ARM Macro Assembler    Page 6 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 158 in file main.s
Comment: TCPS6 used once
TCPS7 2000003C

Symbol: TCPS7
   Definitions
      At line 32 in file main.s
   Uses
      At line 161 in file main.s
Comment: TCPS7 used once
TRUE 00000001

Symbol: TRUE
   Definitions
      At line 3 in file main.s
   Uses
      None
Comment: TRUE unused
TXPIN 20000004

Symbol: TXPIN
   Definitions
      At line 18 in file main.s
   Uses
      At line 92 in file main.s
Comment: TXPIN used once
URL1 2000007C

Symbol: URL1
   Definitions
      At line 48 in file main.s
   Uses
      At line 231 in file main.s
      At line 290 in file main.s
      At line 357 in file main.s
      At line 410 in file main.s
      At line 469 in file main.s
      At line 529 in file main.s

URL10 200000A0

Symbol: URL10
   Definitions
      At line 57 in file main.s
   Uses
      At line 258 in file main.s
      At line 317 in file main.s
      At line 384 in file main.s
      At line 437 in file main.s
      At line 496 in file main.s
      At line 556 in file main.s

URL11 200000A4

Symbol: URL11
   Definitions
      At line 58 in file main.s
   Uses



ARM Macro Assembler    Page 7 Alphabetic symbol ordering
Absolute symbols

      At line 261 in file main.s
      At line 320 in file main.s
      At line 387 in file main.s
      At line 440 in file main.s
      At line 499 in file main.s
      At line 559 in file main.s

URL2 20000080

Symbol: URL2
   Definitions
      At line 49 in file main.s
   Uses
      At line 234 in file main.s
      At line 293 in file main.s
      At line 360 in file main.s
      At line 413 in file main.s
      At line 472 in file main.s
      At line 532 in file main.s

URL3 20000084

Symbol: URL3
   Definitions
      At line 50 in file main.s
   Uses
      At line 237 in file main.s
      At line 296 in file main.s
      At line 363 in file main.s
      At line 416 in file main.s
      At line 475 in file main.s
      At line 535 in file main.s

URL4 20000088

Symbol: URL4
   Definitions
      At line 51 in file main.s
   Uses
      At line 240 in file main.s
      At line 299 in file main.s
      At line 366 in file main.s
      At line 419 in file main.s
      At line 478 in file main.s
      At line 538 in file main.s

URL5 2000008C

Symbol: URL5
   Definitions
      At line 52 in file main.s
   Uses
      At line 243 in file main.s
      At line 302 in file main.s
      At line 369 in file main.s
      At line 422 in file main.s
      At line 481 in file main.s
      At line 541 in file main.s




ARM Macro Assembler    Page 8 Alphabetic symbol ordering
Absolute symbols

URL6 20000090

Symbol: URL6
   Definitions
      At line 53 in file main.s
   Uses
      At line 246 in file main.s
      At line 305 in file main.s
      At line 372 in file main.s
      At line 425 in file main.s
      At line 484 in file main.s
      At line 544 in file main.s

URL7 20000094

Symbol: URL7
   Definitions
      At line 54 in file main.s
   Uses
      At line 249 in file main.s
      At line 308 in file main.s
      At line 375 in file main.s
      At line 428 in file main.s
      At line 487 in file main.s
      At line 547 in file main.s

URL8 20000098

Symbol: URL8
   Definitions
      At line 55 in file main.s
   Uses
      At line 252 in file main.s
      At line 311 in file main.s
      At line 378 in file main.s
      At line 431 in file main.s
      At line 490 in file main.s
      At line 550 in file main.s

URL9 2000009C

Symbol: URL9
   Definitions
      At line 56 in file main.s
   Uses
      At line 255 in file main.s
      At line 314 in file main.s
      At line 381 in file main.s
      At line 434 in file main.s
      At line 493 in file main.s
      At line 553 in file main.s

50 symbols
429 symbols in table
